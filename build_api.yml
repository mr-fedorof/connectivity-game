trigger:
- master
- dev

pool:
  vmImage: 'ubuntu-latest'

variables:
  projectName: 'Connectivity.WebApi'

steps:
- task: NuGetToolInstaller@1

- task: NuGetCommand@2
  inputs:
    restoreSolution: '$(solution)'

- script: dotnet publish $(projectName) --configuration $(Build.SourceBranchName)
  displayName: 'Build and publish the api for $(Build.SourceBranchName) ck'

- task: PublishBuildArtifacts@1
  displayName: 'Publish Artifacts to drop/$(Build.SourceBranchName)'
  inputs:
    PathtoPublish: '$(projectName)/bin/$(Build.SourceBranchName)/netcoreapp3.0/publish'
    ArtifactName: 'drop/$(Build.SourceBranchName)'
    publishLocation: 'Container'